<div class="p-4">
    <h2 class="text-xl font-bold mb-4 text-success">Bulk Edit Success</h2>
    <div class="alert alert-success">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2l4 -4" /></svg>
        <span>{{ message }}</span>
    </div>
    <div class="modal-action mt-6">
        <button type="button" class="btn btn-primary" onclick="nominopolitanBulkEditSuccessClose()">
            Close
        </button>
    </div>
</div>

<script>
function nominopolitanBulkEditSuccessClose() {
    // Compute the storage key as in the list partial
    var modelName = "{{ model_name|default:'' }}";
    var selectionKeySuffix = "{{ selection_key_suffix|default:'' }}";
    var storageKey = 'nominopolitan_' + modelName + '_' + selectionKeySuffix + '_selected';
    if (modelName && selectionKeySuffix) {
        sessionStorage.removeItem(storageKey);
    }
    // Close the modal
    if (window.nominopolitanBaseModal && typeof nominopolitanBaseModal.close === 'function') {
        nominopolitanBaseModal.close();
    }
    // Trigger an HTMX refresh of the list
    var targetId = "{{ original_target|default:'#filtered_results' }}";
    var target = document.querySelector(targetId);
    if (window.htmx && target) {
        htmx.ajax('GET', window.location.pathname, {target: target});
    }
}
</script> 